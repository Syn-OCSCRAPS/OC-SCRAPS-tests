<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OC SCRAPS — Music</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <a href="index.html">
      <img src="assets/ocscrapslogo.png" alt="OC SCRAPS Logo" style="width: 100%; max-width: 300px;">
    </a>
    <nav>
      <a href="index.html">Home</a>
      <a href="music.html">Music</a>
      <a href="about.html">About</a>
      <a href="merch.html">Merch</a>
    </nav>
  </header>
  <main>
    <section class="music-player-box">
      <div class="album-art-fixed">
        <img id="albumArt" src="assets/1.album_cover.jpg" alt="Album Cover">
      </div>
      <div class="track-scroll">
        <ul id="trackList">
          <li data-src="assets/1.introspective_introduction.mp3" data-img="assets/1.album_cover.jpg"><strong>Introspective Introduction</strong><br><span>Syn</span></li>
          <li data-src="assets/track2.mp3" data-img="assets/2.album_cover.jpg"><strong>OC SCRAPS</strong><br><span>Syn</span></li>
          <li data-src="assets/track3.mp3" data-img="assets/3.album_cover.jpg"><strong>noose</strong><br><span>Syn</span></li>
          <li data-src="assets/track4.mp3" data-img="assets/4.album_cover.jpg"><strong>UP, DOWN</strong><br><span>Syn</span></li>
        </ul>
      </div>
      <div class="audio-controls">
        <div id="currentTrackInfo">Playing: <span id="currentTrackName">None</span></div>
        <button id="prevBtn">⏮️</button>
        <button id="playPause">▶️</button>
        <button id="nextBtn">⏭️</button>
        <input type="range" id="progressBar" value="0" min="0" max="100" />
        <audio id="audioPlayer">
          <source src="" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      </div>
    </section>
    <script>
      const tracks = document.querySelectorAll('#trackList li');
      const audio = document.getElementById('audioPlayer');
      const playPause = document.getElementById('playPause');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const progressBar = document.getElementById('progressBar');
      const currentTrackName = document.getElementById('currentTrackName');
      const albumArt = document.getElementById('albumArt');
      let currentTrack = 0;

      function loadTrack(index) {
        tracks.forEach(t => t.classList.remove('active'));
        const track = tracks[index];
        track.classList.add('active');

        const src = track.getAttribute('data-src');
        const name = track.querySelector('strong').textContent;
        const img = track.getAttribute('data-img');
        audio.src = src;
        audio.load();
        audio.play().then(() => {
          playPause.textContent = '⏸️';
        }).catch(err => console.error('Playback error:', err));

        currentTrackName.textContent = name;
        albumArt.src = img;
        currentTrack = index;
      }

      tracks.forEach((track, i) => {
        track.addEventListener('click', () => loadTrack(i));
      });

      playPause.addEventListener('click', () => {
        if (audio.paused) {
          audio.play();
          playPause.textContent = '⏸️';
        } else {
          audio.pause();
          playPause.textContent = '▶️';
        }
      });

      nextBtn.addEventListener('click', () => {
        currentTrack = (currentTrack + 1) % tracks.length;
        loadTrack(currentTrack);
      });

      prevBtn.addEventListener('click', () => {
        currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
        loadTrack(currentTrack);
      });

      audio.addEventListener('timeupdate', () => {
        progressBar.value = (audio.currentTime / audio.duration) * 100 || 0;
      });

      progressBar.addEventListener('input', () => {
        audio.currentTime = (progressBar.value / 100) * audio.duration;
      });
    </script>
  </main>
</body>
</html>
